/*! TVJS Std Extension Pack - v0.2.2 - Sat Nov 21 2020
    https://github.com/tvjsx/tvjs-xp
    Copyright (c) 2020 c451 Code's All Right;
    Licensed under the MIT license */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("trading-vue-js"),require("vue")):"function"==typeof define&&define.amd?define(["trading-vue-js","vue"],e):"object"==typeof exports?exports.TvjsOverlays=e(require("trading-vue-js"),require("vue")):t.TvjsOverlays=e(t["trading-vue-js"],t.vue)}(self,(function(t,e){return(()=>{var n={228:t=>{t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}},646:(t,e,n)=>{var r=n(228);t.exports=function(t){if(Array.isArray(t))return r(t)}},575:t=>{t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},913:t=>{function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}},713:t=>{t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},860:t=>{t.exports=function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}},206:t=>{t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},319:(t,e,n)=>{var r=n(646),i=n(860),s=n(379),o=n(206);t.exports=function(t){return r(t)||i(t)||s(t)||o()}},379:(t,e,n)=>{var r=n(228);t.exports=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}},552:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>nt});var r=n(319),i=n.n(r),s=n(575),o=n.n(s),a=n(913),d=n.n(a);const c=new function t(){o()(this,t),this.__id__=Math.random()};function u(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw s}}}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}const f=function(t,e){var n=JSON.parse(JSON.stringify(t));return Object.assign(n,e)},h=function(t,e){var n,r=[],i=u(e);try{for(i.s();!(n=i.n()).done;){var s=n.value;t.includes(s)||r.push(s)}}catch(t){i.e(t)}finally{i.f()}return r};function v(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return p(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw s}}}}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var g=function(){function t(e,n,r){o()(this,t),r.use_window?(window.xchartlink$||(window.xchartlink$={}),this.shared=window.xchartlink$):this.shared=c,this.tv=e,this.dc=n,this.sett=r,this.targets={},this.onsettings({"chart-link":r})}return d()(t,[{key:"onsettings",value:function(t){var e=this;clearTimeout(this.reset_id),this.sett=t["chart-link"],this.shared.rules||(this.shared.rules={},this.shared.refs={},this.shared.meta={});var n=document.getElementById(this.tv.id);this.sett.rules&&n&&(this.shared.rules[this.tv.id]=this.sett.rules),this.shared.refs[this.tv.id]=this.tv,this.combine(),this.reset_id=setTimeout((function(){return e.reset()}))}},{key:"combine",value:function(){for(var t in this.shared.combined={},this.shared.rules)for(var e in this.shared.rules[t])this.shared.combined[e]=this.shared.rules[t][e]}},{key:"compile",value:function(){var t=i()(document.getElementsByClassName("trading-vue"));this.targets={};var e,n=v(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.id!==this.tv.id&&(this.targets[r.id]={})}}catch(t){n.e(t)}finally{n.f()}var s,o=v(this.rank(this.shared.combined));try{for(o.s();!(s=o.n()).done;){var a=s.value,d=a.pair[1];if("*"===d&&(d=Object.keys(this.targets)),Array.isArray(d)){var c,u=v(d);try{for(u.s();!(c=u.n()).done;){var l=c.value;l in this.targets&&Object.assign(this.targets[l],a.r)}}catch(t){u.e(t)}finally{u.f()}}else{if(!(d in this.targets))continue;Object.assign(this.targets[d],a.r)}}}catch(t){o.e(t)}finally{o.f()}}},{key:"rank",value:function(t){var e=[];for(var n in t){var r=this.splitr(n);if(this.matches(r[0])){if("*"===r[0])var i=20;else i=Array.isArray(r[0])?10:0;"*"===r[1]?i+=2:Array.isArray(r[1])?i+=1:i+=0,e.push({pair:r,rank:i,r:t[n]})}}return e.sort((function(t,e){return e.rank-t.rank}))}},{key:"matches",value:function(t){return"*"===t||t===this.tv.id||Array.isArray(t)&&t.includes(this.tv.id)}},{key:"splitr",value:function(t){return"*"===t.trim()?["*","*"]:t.split("->").map((function(t){var e=t.split(",");return e.length>1?e.map((function(t){return t.trim()})):t.trim()}))}},{key:"reset",value:function(){var t=this;this.compile(),this.tv.$refs.chart.hooks("xchanged"),this.tv.$watch((function(e){return t.dc.get(".").filter((function(t){return t.settings.$state}))}),this.ontools.bind(this))}},{key:"update",value:function(t){switch(t.event){case"?x-changed":var e=t.args[0];if(e.preventDefault)return;var n=this.tv.$refs.chart._layout.grids[e.grid_id],r=this.tv.$refs.chart.cursor;for(var i in e.t=r.t,e.$=r.y$,this.targets){var s=this.targets[i].cursor;if(s){var o=this.shared.refs[i],a=o.$refs.chart._layout.grids[0],d=this.isX(s),c=a.id===n.id&&this.isY(s),u={preventDefault:!0,x:d?a.t2screen(e.t):-10,y:c?a.$2screen(e.$):-10,grid_id:0};o.$refs.chart.cursor_changed(u),o.$refs.chart.cursor.t=d?e.t:-10,o.$refs.chart.cursor.y$=c?e.$:-10}}break;case"range-changed":var l=(new Date).getTime(),f=this.shared.meta[this.tv.id];if(f&&f.position&&f.position.lock>l)return;var h=t.args[0];for(var i in this.targets){var v=this.targets[i].position,p=this.shared.refs[i],g=this.isX(v);this.isY(v);this.shared.meta[i]||(this.shared.meta[i]={}),this.shared.meta[i].position={lock:l+100},g&&p.goto(h[1])}}}},{key:"ontools",value:function(t,e){var n=this,r=h(t.map((function(t){return t.settings.$uuid})),e.map((function(t){return t.settings.$uuid}))),i=(new Date).getTime(),s=this.shared.meta[this.tv.id];if(!(s&&s.tools&&s.tools.lock>i)){var o=function(){var e=n.targets[a].tools,s=n.shared.refs[a];e&&(n.shared.meta[a]||(n.shared.meta[a]={}),n.shared.meta[a].tools={lock:i+100},n.copy_tools(t,s),r.forEach((function(t){return s.data.del("".concat(t))})))};for(var a in this.targets)o()}}},{key:"copy_tools",value:function(t,e){var n,r=v(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.id.includes("offchart")){var s=i.settings.$uuid,o=e.data.get_one("".concat(s));if(o){e.$set(o,"settings",f(i.settings,{$selected:!1,$state:"finished"}));var a,d=v(e.$refs.chart.$refs.sec[0].$refs.grid.$children.filter((function(t){return t.tool})));try{for(d.s();!(a=d.n()).done;){a.value.pins.forEach((function(t){return t.re_init()}))}}catch(t){d.e(t)}finally{d.f()}}else{var c=f(i);c.settings.$selected=!1,c.settings.$state="finished",e.data.add("onchart",c)}}}}catch(t){r.e(t)}finally{r.f()}}},{key:"isX",value:function(t){return!0===t||"string"==typeof t&&t.includes("X")}},{key:"isY",value:function(t){return!0===t||"string"==typeof t&&t.includes("Y")}}]),t}();g.__name__="chart-link";const m={widgets:{},components:{},overlays:{},colorpacks:{},skins:{},Main:g};var y=n(954),w=n(103),b=n.n(w),_=function(){var t=this,e=t.$createElement;return(t._self._c||e)("span",{staticClass:"h-splitter",style:t.hs_style,on:{mousedown:t.hs_mousedown}})};_._withStripped=!0;const x=function(t,e){var n=document.getElementById(t);n&&n.parentNode.removeChild(n);var r=document.createElement("style");r.setAttribute("id",t),r.innerHTML=e,document.body.appendChild(r)},$=function(t,e){var n=document.getElementById(t);n&&n.parentNode.removeChild(n)},k={name:"Splitter",props:["id","main","dc","tv","data"],mounted:function(){this.MIN_HEIGHT=this.data.sett.min_height||20},methods:{hs_mousedown:function(t){this.drag={type:"hs",y:t.clientY,h1:this.data.grid1.height,h2:this.data.grid2.height},x("disable-user-select","body * {\n                user-select: none;\n            }\n            .trading-vue-chart {\n                pointer-events: none;\n            }")},hs_mouseup:function(t){this.drag=null,$("disable-user-select")},hs_mousemove:function(t){if(this.drag){var e=t.clientY-this.drag.y,n=this.drag.h1+e,r=this.drag.h2-e;n>this.MIN_HEIGHT&&r>this.MIN_HEIGHT&&(this.data.grid1.height=n,this.data.grid2.height=r),this.main.calc_heights()}},hs_mouseleave:function(t){this.drag=null,$("disable-user-select")}},computed:{hs_style:function(){return{drag:null,top:this.data.grid2.offset+"px"}}}};n(712);function S(t,e,n,r,i,s,o,a){var d,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),r&&(c.functional=!0),s&&(c._scopeId="data-v-"+s),o?(d=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},c._ssrRegister=d):i&&(d=a?function(){i.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:i),d)if(c.functional){c._injectStyles=d;var u=c.render;c.render=function(t,e){return d.call(e),u(t,e)}}else{var l=c.beforeCreate;c.beforeCreate=l?[].concat(l,d):[d]}return{exports:t,options:c}}var j=S(k,_,[],!1,null,"189fccad",null);j.options.__file="src/extensions/grid-resize/Splitter.vue";const A=j.exports;function C(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return I(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw s}}}}function I(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var E=function(){function t(e,n,r){var i=this;o()(this,t),this.widgets={},this.tv=e,this.dc=n,this.sett=r,setTimeout((function(){i.tv.$el.addEventListener("mousemove",i.onmousemove.bind(i)),i.tv.$el.addEventListener("mouseup",i.onmouseup.bind(i)),i.tv.$el.addEventListener("mouseleave",i.onmouseleave.bind(i)),i.place_splitters(),i.calc_heights(),i.tv.$watch((function(t){return i.dc.get(".").map((function(t){return t.id}))}),i.ongrids.bind(i))}))}return d()(t,[{key:"update",value:function(t){t.event}},{key:"onsettings",value:function(t){}},{key:"ongrids",value:function(){this.remove_widgets(),this.place_splitters()}},{key:"onmousemove",value:function(t){var e,n=this,r=C(this.tv.$refs.widgets.$children.filter((function(t){return t.main===n})));try{for(r.s();!(e=r.n()).done;){e.value.hs_mousemove(t)}}catch(t){r.e(t)}finally{r.f()}}},{key:"onmouseup",value:function(t){var e,n=this,r=C(this.tv.$refs.widgets.$children.filter((function(t){return t.main===n})));try{for(r.s();!(e=r.n()).done;){e.value.hs_mouseup(t)}}catch(t){r.e(t)}finally{r.f()}}},{key:"onmouseleave",value:function(t){var e,n=this,r=C(this.tv.$refs.widgets.$children.filter((function(t){return t.main===n})));try{for(r.s();!(e=r.n()).done;){e.value.hs_mouseleave(t)}}catch(t){r.e(t)}finally{r.f()}}},{key:"place_splitters",value:function(){for(var t=this.tv.$refs.chart._layout.grids,e=1;e<t.length;e++){var n=t[e-1],r=t[e],i="Splitter-".concat(n.id,"-").concat(r.id,"-").concat(y.Utils.uuid2());b().set(this.widgets,i,{id:i,cls:A,data:{grid1:n,grid2:r,sett:this.sett}})}}},{key:"calc_heights",value:function(){var t,e=[],n=C(this.tv.$refs.chart._layout.grids);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.push(r.height)}}catch(t){n.e(t)}finally{n.f()}var i=e.reduce((function(t,e){return t+e}),0);e=e.map((function(t){return t/i})),this.grid_ovs().forEach((function(t,n){t.grid||b().set(t,"grid",{}),b().set(t.grid,"height",e[n]||1)}))}},{key:"grid_ovs",value:function(){var t,e=[this.dc.data.chart],n=C(this.dc.data.offchart);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.grid&&void 0!==r.grid.id||e.push(r)}}catch(t){n.e(t)}finally{n.f()}return e}},{key:"remove_widgets",value:function(){for(var t in this.widgets)this.tv.$delete(this.widgets,t)}},{key:"destroy",value:function(){this.tv.$el.removeEventListener("mousemove",this.onmousemove),this.tv.$el.removeEventListener("mouseup",this.mouseup),this.tv.$el.removeEventListener("mouseleave",this.mouseleave)}}]),t}();E.__name__="grid-resize";const O={widgets:{},components:{},overlays:{},colorpacks:{},skins:{},Main:E};var T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("window",{staticClass:"add-win",attrs:{title:"Add Overlay",tv:t.tv},on:{close:t.on_close}},[n("div",{staticClass:"add-win-list"},t._l(t.ovs,(function(e){return n("div",{staticClass:"add-win-item",on:{click:function(n){return t.on_click(e.name)}}},[n("span",[t._v(t._s(e.name))]),t._v(" "),n("span",{staticClass:"add-win-item-desc"},[t._v("\n                "+t._s(e.methods.meta_info().desc)+"\n            ")])])})),0)])};T._withStripped=!0;var M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"win",staticClass:"tvjs-x-window",style:t.style},[n("div",{staticClass:"tvjs-x-window-head"},[n("div",{staticClass:"tvjs-x-window-title",on:{mousedown:t.onMouseDown}},[t._v("\n            "+t._s(t.title)+"\n        ")]),t._v(" "),n("div",{staticClass:"tvjs-x-window-close",on:{click:function(e){return t.$emit("close")}}},[t._v("\n            â•³\n        ")])]),t._v(" "),n("div",{staticClass:"tvjs-x-window-body"},[t._t("default")],2)])};M._withStripped=!0;const U={name:"Window",mixins:[{methods:{onMouseDown:function(t){(t=t||window.event).preventDefault(),this.drag.offset_x=t.clientX-this.x,this.drag.offset_y=t.clientY-this.y,document.onmouseup=this.stopdrag,document.onmousemove=this.ondrag},ondrag:function(t){(t=t||window.event).preventDefault(),this.x=t.clientX-this.drag.offset_x,this.y=t.clientY-this.drag.offset_y},stopdrag:function(){document.onmouseup=null,document.onmousemove=null}},data:function(){return{drag:{offset_x:0,offset_y:0}}}}],props:["title","tv"],mounted:function(){this.ww=this.$refs.win.clientWidth,this.wh=this.$refs.win.clientHeight,this.x=.5*this.tvw-.5*this.ww,this.y=.5*this.tvh-.5*this.wh},computed:{style:function(){return{top:"".concat(this.y,"px"),left:"".concat(this.x,"px")}},tvw:function(){return this.$props.tv.width},tvh:function(){return this.$props.tv.height}},data:function(){return{ww:0,wh:0,x:0,y:0}}};n(144);var N=S(U,M,[],!1,null,null,null);N.options.__file="src/components/Window.vue";const W=N.exports,L={name:"AddWin",props:["id","main","dc","tv","data"],components:{Window:W},mounted:function(){},methods:{on_close:function(){this.$props.main.remove_widget(this.$props.id)},on_click:function(t){this.on_close(),this.main.add_overlay({side:this.data.type,index:this.data.index,type:t})}},computed:{sett:function(){return this.$props.data.ov.settings}},data:function(){return{ovs:this.tv.overlays.filter((function(t){return t.methods.calc}))}}};n(153);var R=S(L,T,[],!1,null,"53408ac7",null);R.options.__file="src/extensions/legend-buttons/AddWin.vue";const z=R.exports;function D(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return H(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return H(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw s}}}}function H(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var B=function(){function t(e,n,r){o()(this,t),this.widgets={},this.tv=e,this.dc=n,this.sett=r}return d()(t,[{key:"update",value:function(t){switch(t.event){case"legend-button-click":this.onbutton(t.args[0])}}},{key:"onbutton",value:function(t){var e=this.dc.get(t.type)[t.dataIndex],n=this.dc.data.onchart,r=this.dc.data.offchart;if(e)switch(t.button){case"display":if(void 0===e.settings.display)var i=!1;else i=!e.settings.display;this.tv.$set(e.settings,"display",i);break;case"up":if("offchart"===t.type)if(0===t.dataIndex)r.splice(t.dataIndex,1),n.push(e);else{var s=r,o=t.dataIndex,a=t.dataIndex-1;s[o]=s.splice(a,1,s[o])[0]}this.dc.update_ids();break;case"down":if("onchart"===t.type){var d=this.avg_grid_h(r);n.splice(t.dataIndex,1),r.unshift(e),this.tv.$set(e,"grid",{height:d})}else{var c=r.length,u=r;if(t.dataIndex<c-1){var l=t.dataIndex,f=t.dataIndex+1;u[l]=u.splice(f,1,u[l])[0]}}this.dc.update_ids();break;case"add":try{var h="AddWin-".concat(y.Utils.uuid2()),v=this.dc.data[t.type][t.dataIndex],p=Object.values(this.widgets).find((function(t){return t.data.ov===v}));if(p){this.tv.$delete(this.widgets,p.id);break}this.tv.$set(this.widgets,h,{id:h,cls:z,data:{ov:v,type:t.type,index:t.dataIndex}})}catch(t){console.log(t)}break;case"remove":this.dc.data[t.type].splice(t.dataIndex,1),this.dc.update_ids()}}},{key:"add_overlay",value:function(t){var e=this.dc.data.onchart,n=this.dc.data.offchart;if("onchart"===t.side)e.splice(t.index+1,0,{type:t.type,data:[],settings:{}});else{var r=this.avg_grid_h(n);n.splice(t.index+1,0,{type:t.type,data:[],settings:{},grid:{height:r}})}this.dc.update_ids()}},{key:"onsettings",value:function(t){}},{key:"avg_grid_h",value:function(t){if(!t.length)return.25;var e,n=0,r=D(t);try{for(r.s();!(e=r.n()).done;){var i=e.value;i.grid&&"number"==typeof i.grid.height&&(n+=i.grid.height)}}catch(t){r.e(t)}finally{r.f()}return n/t.length}},{key:"remove_widget",value:function(t){this.tv.$delete(this.widgets,t)}},{key:"destroy",value:function(){}}]),t}();B.__name__="legend-buttons";const P={widgets:{},components:{},overlays:{},colorpacks:{},skins:{},Main:B};var X=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("window",{staticClass:"sett-win",attrs:{title:t.data.ov.name,tv:t.tv},on:{close:t.on_close}},[t._l(t.settlist,(function(e){return n("div",{staticClass:"sett-win-item"},[n("label",[t._v(t._s(t.s2d(e)))]),t._v(" "),n("std-input",{attrs:{value:t.sett[e]},on:{input:function(n){return t.update_sett(e,n)}}})],1)})),t._v(" "),t.settlist.length?t._e():n("span",{staticClass:"sett-win-empty"},[n("i",[t._v("No script settings")])])],2)};X._withStripped=!0;var Y=n(713),Z=n.n(Y),q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",["text"!==t.type&&t.type?"select"===t.type?n("select",{staticClass:"tvjs-std-input",style:t.style,domProps:{value:t.value},on:{input:function(e){return t.$emit("input",e.target.value)}}},t._l(t.list,(function(e){return n("option",[t._v(t._s(e))])})),0):t._e():n("input",{staticClass:"tvjs-std-input",style:t.style,attrs:{placeholder:t.name},domProps:{value:t.value},on:{change:function(e){return t.$emit("change",e.target.value)},input:function(e){return t.$emit("input",e.target.value)}}})])};q._withStripped=!0;const G={name:"StdInput",props:["value","name","type","list","colors"],methods:{},computed:{style:function(){return{}}},data:function(){return{}}};n(92);var F=S(G,q,[],!1,null,null,null);F.options.__file="src/components/StdInput.vue";const J=F.exports,V=function(t){var e=(t=(t=t.replace(/([^A-Z])([A-Z])/g,"$1 $2")).replace(/-|_/g," ")).split(" ");return(e=e.filter((function(t){return t.length})).map((function(t){return e=t,n=0,r=t[0].toUpperCase(),n>e.length-1?e:e.substring(0,n)+r+e.substring(n+1);var e,n,r}))).join(" ")},K={name:"SettingsWin",props:["id","main","dc","tv","data"],components:{Window:W,StdInput:J},mounted:function(){},methods:{s2d:function(t){return V(t)},on_close:function(){this.$props.main.remove_widget(this.$props.id)},update_sett:function(t,e){var n=this.$props.data.ov.id,r=parseFloat(e);r!=r&&(r=e),this.$props.dc.merge("".concat(n,".settings"),Z()({},t,r))}},computed:{sett:function(){return this.$props.data.ov.settings},settlist:function(){var t=this;return Object.keys(this.sett).filter((function(e){return"$"!==e[0]&&t.sett.$props&&t.sett.$props.includes(e)}))}}};n(209);var Q=S(K,X,[],!1,null,"5d223b0e",null);Q.options.__file="src/extensions/settings-win/SettingsWin.vue";const tt=Q.exports;var et=function(){function t(e,n){o()(this,t),this.widgets={},this.tv=e,this.dc=n}return d()(t,[{key:"update",value:function(t){switch(t.event){case"legend-button-click":var e="SettingsWin-".concat(y.Utils.uuid2()),n=t.args[0];if("settings"!==n.button)break;try{var r=this.dc.data[n.type][n.dataIndex],i=Object.values(this.widgets).find((function(t){return t.data.ov===r}));if(i){this.tv.$delete(this.widgets,i.id);break}this.tv.$set(this.widgets,e,{id:e,cls:tt,data:{ov:r}})}catch(t){console.log(t)}}}},{key:"remove_widget",value:function(t){this.tv.$delete(this.widgets,t)}}]),t}();et.__name__="settings-win";const nt={"chart-link":m,"grid-resize":O,"legend-buttons":P,"settings-win":{widgets:{SettingsWin:tt},SettingsWin:tt,components:{},overlays:{},colorpacks:{},skins:{},Main:et}}},90:(t,e,n)=>{(e=n(645)(!1)).push([t.id,"\n.tvjs-std-input {\n    margin: 5px;\n    background-color: #161b27;\n    border: 1px dotted #353940;\n    height: 22px;\n    border-radius: 3px;\n    padding: 2px 0px 3px 10px;\n    color: whitesmoke;\n    font-size: 1.2em;\n    outline: none;\n    width: 100px;\n}\nselect.tvjs-std-input {\n    height: 29px;\n    -moz-appearance: none;\n}\nselect.tvjs-std-input  {\n    //display: none; /*hide original SELECT element: */\n}\n.tvjs-std-input::placeholder {\n    color: #8e909a;\n    opacity: 0.25;\n}\n",""]),t.exports=e},486:(t,e,n)=>{(e=n(645)(!1)).push([t.id,"\n.tvjs-x-window {\n    position: absolute;\n    background: #1b202def;\n    border-radius: 3px;\n    pointer-events: all;\n    padding-left: 7px;\n    z-index: 100;\n    color: #dedddd;\n}\n.tvjs-x-window-head {\n    font-size: 2em;\n    user-select: none;\n    display: flex;\n    flex-direction: row;\n    flex-wrap: nowrap;\n    justify-content: flex-start;\n    align-content: center;\n    align-items: center;\n    height: 36px;\n    padding: 10px;\n    cursor: grab;\n}\n.tvjs-x-window-body {\n    padding: 10px;\n    font-size: 1.1em;\n}\n.tvjs-x-window-title {\n    width: 300px;\n    user-select: none;\n}\n.tvjs-x-window-close {\n    width: 26px;\n    cursor: pointer;\n    margin: -1em;\n    padding: 1em;\n    font-size: 0.75em;\n}\n",""]),t.exports=e},985:(t,e,n)=>{(e=n(645)(!1)).push([t.id,"\n.h-splitter[data-v-189fccad] {\n    position: absolute;\n    left: 0;\n    height: 5px;\n    margin-top: -2px;\n    width: 100%;\n    z-index: 1;\n    background-color: #3ee4afb5;\n    opacity: 0;\n    pointer-events: all;\n}\n.h-splitter[data-v-189fccad]:hover {\n    cursor: row-resize;\n    opacity: 1;\n}\n",""]),t.exports=e},283:(t,e,n)=>{(e=n(645)(!1)).push([t.id,"\n.tvjs-x-window.add-win[data-v-53408ac7] {\n    padding-bottom: 30px;\n    border: 1px solid #80808011;\n}\n.add-win-list[data-v-53408ac7] {\n    height: 300px;\n    overflow-x: hidden;\n    overflow-y: auto;\n    user-select: none;\n}\n/* Hide scrollbar for Chrome, Safari and Opera */\n.add-win-list[data-v-53408ac7]::-webkit-scrollbar {\n  display: none;\n}\n\n/* Hide scrollbar for IE, Edge and Firefox */\n.add-win-list[data-v-53408ac7] {\n  -ms-overflow-style: none;  /* IE and Edge */\n  scrollbar-width: none;  /* Firefox */\n}\n.add-win-item[data-v-53408ac7] {\n    color: #ffffff88;\n    width: 100%;\n    padding: 5px;\n    cursor: pointer;\n}\n.add-win-item[data-v-53408ac7]:hover {\n    background: #88888822;\n    color: #ffffffff;\n}\n.add-win-item-desc[data-v-53408ac7] {\n    color: #ffffff33;\n    margin-left: 3px;\n}\n.add-win-item:hover .add-win-item-desc[data-v-53408ac7] {\n    color: #ffffff44;\n}\n.add-win-empty[data-v-53408ac7] {\n    opacity: 0.5;\n}\n",""]),t.exports=e},855:(t,e,n)=>{(e=n(645)(!1)).push([t.id,"\n.tvjs-x-window.sett-win[data-v-5d223b0e] {\n    padding-bottom: 30px;\n    border: 1px solid #80808011;\n}\n.sett-win-item[data-v-5d223b0e] {\n    display: flex;\n    flex-direction: row;\n    flex-wrap: nowrap;\n    justify-content: flex-start;\n    align-content: center;\n    align-items: center;\n}\n.sett-win-item label[data-v-5d223b0e] {\n    min-width: 80px;\n    color: #35a776;\n}\n.sett-win-empty[data-v-5d223b0e] {\n    opacity: 0.5;\n}\n",""]),t.exports=e},645:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var i=(o=r,a=btoa(unescape(encodeURIComponent(JSON.stringify(o)))),d="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),"/*# ".concat(d," */")),s=r.sources.map((function(t){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(t," */")}));return[n].concat(s).concat([i]).join("\n")}var o,a,d;return[n].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,r){"string"==typeof t&&(t=[[null,t,""]]);var i={};if(r)for(var s=0;s<this.length;s++){var o=this[s][0];null!=o&&(i[o]=!0)}for(var a=0;a<t.length;a++){var d=[].concat(t[a]);r&&i[d[0]]||(n&&(d[2]?d[2]="".concat(n," and ").concat(d[2]):d[2]=n),e.push(d))}},e}},92:(t,e,n)=>{var r=n(90);"string"==typeof r&&(r=[[t.id,r,""]]),r.locals&&(t.exports=r.locals);(0,n(346).Z)("c03f22ea",r,!1,{})},144:(t,e,n)=>{var r=n(486);"string"==typeof r&&(r=[[t.id,r,""]]),r.locals&&(t.exports=r.locals);(0,n(346).Z)("4007806b",r,!1,{})},712:(t,e,n)=>{var r=n(985);"string"==typeof r&&(r=[[t.id,r,""]]),r.locals&&(t.exports=r.locals);(0,n(346).Z)("00e7b1b4",r,!1,{})},153:(t,e,n)=>{var r=n(283);"string"==typeof r&&(r=[[t.id,r,""]]),r.locals&&(t.exports=r.locals);(0,n(346).Z)("657d4da2",r,!1,{})},209:(t,e,n)=>{var r=n(855);"string"==typeof r&&(r=[[t.id,r,""]]),r.locals&&(t.exports=r.locals);(0,n(346).Z)("3692d5e9",r,!1,{})},346:(t,e,n)=>{"use strict";function r(t,e){for(var n=[],r={},i=0;i<e.length;i++){var s=e[i],o=s[0],a={id:t+":"+i,css:s[1],media:s[2],sourceMap:s[3]};r[o]?r[o].parts.push(a):n.push(r[o]={id:o,parts:[a]})}return n}n.d(e,{Z:()=>v});var i="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!i)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var s={},o=i&&(document.head||document.getElementsByTagName("head")[0]),a=null,d=0,c=!1,u=function(){},l=null,f="data-vue-ssr-id",h="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function v(t,e,n,i){c=n,l=i||{};var o=r(t,e);return p(o),function(e){for(var n=[],i=0;i<o.length;i++){var a=o[i];(d=s[a.id]).refs--,n.push(d)}e?p(o=r(t,e)):o=[];for(i=0;i<n.length;i++){var d;if(0===(d=n[i]).refs){for(var c=0;c<d.parts.length;c++)d.parts[c]();delete s[d.id]}}}}function p(t){for(var e=0;e<t.length;e++){var n=t[e],r=s[n.id];if(r){r.refs++;for(var i=0;i<r.parts.length;i++)r.parts[i](n.parts[i]);for(;i<n.parts.length;i++)r.parts.push(m(n.parts[i]));r.parts.length>n.parts.length&&(r.parts.length=n.parts.length)}else{var o=[];for(i=0;i<n.parts.length;i++)o.push(m(n.parts[i]));s[n.id]={id:n.id,refs:1,parts:o}}}}function g(){var t=document.createElement("style");return t.type="text/css",o.appendChild(t),t}function m(t){var e,n,r=document.querySelector("style["+f+'~="'+t.id+'"]');if(r){if(c)return u;r.parentNode.removeChild(r)}if(h){var i=d++;r=a||(a=g()),e=b.bind(null,r,i,!1),n=b.bind(null,r,i,!0)}else r=g(),e=_.bind(null,r),n=function(){r.parentNode.removeChild(r)};return e(t),function(r){if(r){if(r.css===t.css&&r.media===t.media&&r.sourceMap===t.sourceMap)return;e(t=r)}else n()}}var y,w=(y=[],function(t,e){return y[t]=e,y.filter(Boolean).join("\n")});function b(t,e,n,r){var i=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=w(e,i);else{var s=document.createTextNode(i),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(s,o[e]):t.appendChild(s)}}function _(t,e){var n=e.css,r=e.media,i=e.sourceMap;if(r&&t.setAttribute("media",r),l.ssrId&&t.setAttribute(f,e.id),i&&(n+="\n/*# sourceURL="+i.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}},954:e=>{"use strict";e.exports=t},103:t=>{"use strict";t.exports=e}},r={};function i(t){if(r[t])return r[t].exports;var e=r[t]={id:t,exports:{}};return n[t](e,e.exports,i),e.exports}return i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i(552)})()}));
//# sourceMappingURL=tvjs-xp.min.js.map